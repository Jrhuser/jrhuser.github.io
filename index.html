<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtration System Selector</title>
    <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8">
  <title>Cooling System Selector</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f4f4; }
    header { background-color: #004080; color: white; padding: 10px 20px; text-align: center; }
    .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    label, select, input { display: block; margin: 10px 0; width: 100%; padding: 8px; }
    .radio-group { display: flex; gap: 20px; margin: 10px 0; }
    .radio-group label { display: flex; align-items: center; gap: 5px; width: auto; }
    button { background-color: #004080; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background-color: #003060; }
    .result { border: 1px solid #ccc; padding: 10px; margin-top: 10px; border-radius: 4px; background: #f9f9f9; }
  </style>

</head>
<body>
    <header>
        <h1>Cooling Water Filtration</h1>
        </header>


    <main>
        <section class="selection-box">
            <div class="box-header"></div>
            <div class="box-content">
                <input type="radio" id="openSystem" name="systemType" value="open" checked>
                <label for="openSystem">Open</label>
                <input type="radio" id="closedSystem" name="systemType" value="closed">
                <label for="closedSystem">Closed</label>
            </div>
        </section>

<header>
  <h1>Cooling System Selector</h1>
</header>



        <section id="openInputs" class="input-section selection-box">
            <div class="box-header"></div>
            <div class="box-content">
                <div class="input-group">
                    <label for="recircRate">Recirc Rate (GPM):</label>
                    <input type="number" id="recircRate" name="recircRate" placeholder="Enter GPM">
                </div>
                <p class="or-separator">OR</p>
                <div class="input-group">
                    <label for="openSystemVolume">System Volume (Gallons):</label>
                    <input type="number" id="openSystemVolume" name="openSystemVolume" placeholder="Enter Gallons">
                </div>
            </div>
        </section>

<div class="container">
  <form id="filter-form">
    <label>Cooling System Type:</label>
    <div class="radio-group">
      <label>
        <input type="radio" name="systemType" value="Open" required>
        Open Loop
      </label>
      <label>
        <input type="radio" name="systemType" value="Closed" required>
        Closed Loop
      </label>
    </div>



        <section id="closedInputs" class="input-section selection-box" style="display: none;">
            <div class="box-header"></div>
            <div class="box-content">
                <div class="input-group">
                    <label for="closedSystemVolume">System Volume (Gallons):</label>
                    <input type="number" id="closedSystemVolume" name="closedSystemVolume" placeholder="Enter Gallons">
                </div>
            </div>
        </section>

    <div id="openLoopOptions" style="display: none;">
      <label for="openLoopChoice">Select Input Type:</label>
      <select id="openLoopChoice">
        <option value="">-- Select --</option>
        <option value="recirc">Recirc Rate (GPM)</option>
        <option value="tonnage">Tonnage (Tons)</option>
      </select>


        <section class="selection-box">
            <div class="box-header"></div>
            <div class="box-content">
                <div class="input-group">
                    <label for="electricalCost">Electrical Cost ($/kWh):</label>
                    <input type="number" id="electricalCost" name="electricalCost" step="0.01" placeholder="Enter $/kWh">
                </div>
            </div>
        </section>

      <div id="recircInput" style="display: none;">
        <label for="recircRate">Recirc Rate (GPM):</label>
        <input type="number" id="recircRate" min="0">
      </div>

      <div id="tonnageInput" style="display: none;">
        <label for="tonnage">Tonnage (Tons):</label>
        <input type="number" id="tonnage" min="0">
      </div>
    </div>



        <button id="calculateButton">Calculate</button>

    <div id="closedLoopOptions" style="display: none;">
      <label for="systemVolume">System Volume (Gallons):</label>
      <input type="number" id="systemVolume" min="0">
    </div>



        <hr class="output-separator">

    <button type="submit">Search</button>
  </form>


        <section id="outputSection" style="display: none;">
            <h2>Results</h2>
            <div class="results-grid">
                <div class="column" id="separatorOutput">
                    <h3>Separator</h3>
                    <p><strong>Model:</strong> <span id="separatorModel"></span></p>
                    <p><strong>Flowrate (GPM):</strong> <span id="separatorFlowrate"></span></p>
                    <p><strong>Description:</strong> <span id="separatorDescription"></span></p>
                    <p><strong>Annual Electrical Cost:</strong> $<span id="separatorAnnualCost"></span></p>
                </div>
                <div class="column" id="vafOutput">
                    <h3>VAF</h3>
                    <p><strong>Model:</strong> <span id="vafModel"></span></p>
                    <p><strong>Flowrate (GPM):</strong> <span id="vafFlowrate"></span></p>
                    <p><strong>Description:</strong> <span id="vafDescription"></span></p>
                    <p><strong>Annual Electrical Cost:</strong> $<span id="vafAnnualCost"></span></p>
                </div>
                <div class="column" id="vortisandOutput">
                    <h3>Vortisand</h3>
                    <p><strong>Model:</strong> <span id="vortisandModel"></span></p>
                    <p><strong>Flowrate (GPM):</strong> <span id="vortisandFlowrate"></span></p>
                    <p><strong>Description:</strong> <span id="vortisandDescription"></span></p>
                    <p><strong>Annual Electrical Cost:</strong> $<span id="vortisandAnnualCost"></span></p>
                </div>
            </div>
        </section>
    </main>

  <div id="results"></div>
</div>


    <script src="script.js"></script>

<script>
  let data = [];

  // Load JSON data
  fetch('selection_database.json')
    .then(response => response.json())
    .then(json => data = json);

  const systemTypeRadios = document.querySelectorAll('input[name="systemType"]');
  const openLoopOptions = document.getElementById('openLoopOptions');
  const closedLoopOptions = document.getElementById('closedLoopOptions');
  const openLoopChoice = document.getElementById('openLoopChoice');
  const recircInput = document.getElementById('recircInput');
  const tonnageInput = document.getElementById('tonnageInput');
  const resultsDiv = document.getElementById('results');

  systemTypeRadios.forEach(radio => {
    radio.addEventListener('change', () => {
      if (radio.value === 'Open') {
        openLoopOptions.style.display = 'block';
        closedLoopOptions.style.display = 'none';
      } else if (radio.value === 'Closed') {
        openLoopOptions.style.display = 'none';
        closedLoopOptions.style.display = 'block';
        recircInput.style.display = 'none';
        tonnageInput.style.display = 'none';
      }
    });
  });

  openLoopChoice.addEventListener('change', () => {
    recircInput.style.display = openLoopChoice.value === 'recirc' ? 'block' : 'none';
    tonnageInput.style.display = openLoopChoice.value === 'tonnage' ? 'block' : 'none';
  });

  document.getElementById('filter-form').addEventListener('submit', function (e) {
    e.preventDefault();
    resultsDiv.innerHTML = '';

    const type = document.querySelector('input[name="systemType"]:checked').value;
    let filtered = [];

    if (type === 'Open') {
      const choice = openLoopChoice.value;
      if (choice === 'recirc') {
        const recirc = parseFloat(document.getElementById('recircRate').value);
        filtered = data.filter(item =>
          item['Min Recirc (gallons)'] <= recirc && recirc <= item[' Max Recirc (gallons)']
        );
      } else if (choice === 'tonnage') {
        const tonnage = parseFloat(document.getElementById('tonnage').value);
        filtered = data.filter(item =>
          item['Tonnage Min'] <= tonnage && tonnage <= item['Tonnage Max']
        );
      }
    } else if (type === 'Closed') {
      const volume = parseFloat(document.getElementById('systemVolume').value);
      filtered = data.filter(item =>
        item['Loop Min'] <= volume && volume <= item['Loop Max']
      );
    }

    if (filtered.length === 0) {
      resultsDiv.innerHTML = '<p>No matching models found.</p>';
    } else {
      filtered.forEach(item => {
        const div = document.createElement('div');
        div.className = 'result';
        div.innerHTML = `<strong>${item.Model}</strong><br>
                         HP: ${item.hp}<br>
                         Flow Rate: ${item['Flow Rate']}<br>
                         Description: ${item.Description || 'N/A'}`;
        resultsDiv.appendChild(div);
      });
    }
  });
</script>

</body>
</html>